let ProductRepository,CategoryRepository,StatusRepository;_47f‍.x([["default",()=>ProductService]]);_47f‍.w("../repository/product.repository",[["default",["ProductRepository"],function(v){ProductRepository=v}]]);_47f‍.w("../repository/category.repository",[["default",["CategoryRepository"],function(v){CategoryRepository=v}]]);_47f‍.w("../repository/status.repository",[["default",["StatusRepository"],function(v){StatusRepository=v}]]);



               class ProductService {
    async getProductById(id) {
        return await new ProductRepository().findOne(id);
    }

    async createProduct(product) {
        return await new ProductRepository().createProduct(product)
    }

    async getAllProduct() {
        return await new ProductRepository().findAllProduct()
    }

    async deleteProduct(product) {
        const productDelete = this.getProductById(product.id);
        if(productDelete.length>0){
            await new ProductRepository().deleteProduct(product)
            return this.getProductById(product.id)
        }else{
            const result ={"message":"product not found"}
            return result
        }

    }
    
    async updateProduct(product) {
        const category = await new CategoryRepository().findCategoryById(product.categoryId)
        const productUpdate = await new ProductRepository().findProductById(product.id)
        if (category.length > 0 ) {
            if(productUpdate.length>0){
                await new ProductRepository().updateProduct(product)
                return this.getProductById(product.id)
            }else{
                const result={"message": "product not found"}
                return result;
            }
        } else {
            const result={"message": "category not found"}
            return result;
        }
    }
}